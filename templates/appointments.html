{% extends "layout.html" %}
{% block title %}Appointments - Abhidha Construction{% endblock %}
{% block header_title %}Appointments{% endblock %}
{% block content %}
<div class="form-card">
    <h3>Schedule New Appointment</h3>
    <form method="POST" action="{{ url_for('appointments') }}" role="form" aria-label="Schedule appointment form">
        <div class="form-group">
            <label for="title">Title <span style="color: var(--color-danger);">*</span></label>
            <input type="text" id="title" name="title" required autofocus placeholder="Enter appointment title">
        </div>
        <div class="form-group">
            <label for="appt_date">Date <span style="color: var(--color-danger);">*</span></label>
            <input type="date" id="appt_date" name="appt_date" required>
        </div>
        <div class="form-group">
            <label for="appt_time">Time <span style="color: var(--color-danger);">*</span></label>
            <input type="time" id="appt_time" name="appt_time" required>
        </div>
        <div class="form-group">
            <label for="attendees">Attendees</label>
            <input type="text" id="attendees" name="attendees" placeholder="Enter attendee names">
        </div>
        <button type="submit" class="btn btn-primary">Schedule Appointment</button>
    </form>
</div>

<hr class="divider">

<h3>Upcoming Appointments</h3>
{% if appointments %}
<div class="item-grid">
    {% for appt in appointments %}
    <article class="appointment-card">
        <h3>{{ appt.title }}</h3>
        <p><strong>Date:</strong> {{ appt.appt_date or 'N/A' }}</p>
        <p><strong>Time:</strong> {{ appt.appt_time or 'N/A' }}</p>
        <p><strong>Attendees:</strong> {{ appt.attendees or 'N/A' }}</p>
        <form action="{{ url_for('delete_appointment', appt_id=appt.id) }}" method="POST" class="delete-form">
            <button type="submit" class="btn btn-danger btn-small">Delete</button>
        </form>
    </article>
    {% endfor %}
</div>
{% else %}
<div class="form-card text-center">
    <p style="font-size: 1.1rem; color: var(--color-secondary);">
        No appointments scheduled.
    </p>
</div>
{% endif %}
{% endblock %}